
13.01.2026

  Ziel:
  Umsetzung eines Python-Projekts mit OpenCV (cv2):
  Webcam-Bild erfassen, Gesicht erkennen und später das Gesicht in ein vorgegebenes Bild mit “Loch”    einsetzen.

  Setup/Installation
  - Projekt in PyCHarm angelegt und eine virtuelle Umgebung (.venv) verwendet
  - Installierte Bibliotheken:
        - opencv-python (Computer Vision / Kamera / Bildverarbeitung)
        - numpy (Bilddaten als Arrays, Masken, Blending)

  Webcam + Gesichtserkennung:
  - Webcam-Stream über cv2.VideoCapture(...) öffnen
  - Ausgabe als Live-Preview

  Template
  soll an der Loch-Position transparent sein, damit das eingefügte Gesicht sichtbar wird.
  Mit Photoshop Bereich entfernt, Export als PNG

  Quellen: 
  - OpenCV (Python) – Install/Docs: https://pypi.org/project/opencv-python/
  - Haar-Cascades (Face Detection, OpenCV Doku): https://docs.opencv.org/4.x/d7/d8b/tutorial_py_face_detection.html
  - NumPy (für Arrays/Masken): https://numpy.org/doc/
  - ChatGPT


## 20.01.2026

## Ziel für heute
- Implementierung der Face-in-Hole-Funktion mit PNG-Template und Transparenz (Alpha)
- Automatische Positionierung des Gesichts im Loch
- Stabilisierung der Gesichtsdarstellung
- Analyse von Problemen bei der Gesichtserkennung

## Durchgeführte Arbeiten
- Bestehenden Webcam- und Face-Detection-Code (OpenCV, Haar Cascade) analysiert
- PNG-Template mit Alpha-Kanal in das Programm eingebunden
- Alpha-Compositing implementiert (Webcam-Bild hinter PNG)
- Verschiedene Ansätze zur Platzierung des Gesichts getestet:
  - Einfügen eines ausgeschnittenen Gesichtsbereichs in das Loch
  - Automatische Skalierung und Verschiebung des Gesichts
  - Transformation des gesamten Kamerabildes (Affine Transformation)
- Spiegelung des Kamerabildes (Selfie-Ansicht) umgesetzt
- Debug-Ausgaben zur Gesichtserkennung ergänzt

## Probleme / Schwierigkeiten
- Die Haar-Cascade-Gesichtserkennung arbeitet nicht stabil genug
- Gesicht wird nicht zuverlässig erkannt → teilweise nur Schulter oder Hintergrund sichtbar
- Automatische Zentrierung des Gesichts im Loch funktioniert nicht zuverlässig
- Unterschiedliches Verhalten je nach Abstand, Licht und Kamerawinkel

## Verwendete Quellen 

### OpenCV – Dokumentation
- https://docs.opencv.org/
- zuletzt besucht: 20.01.2026

### Haar Cascade Klassifikatoren
- https://github.com/opencv/opencv/tree/master/data/haarcascades
- zuletzt besucht: 20.01.2026

### Alpha-Compositing / Alpha-Blending
- https://learnopencv.com/alpha-blending-using-opencv-cpp-python/
- zuletzt besucht: 20.01.2026

### KI-Unterstützung
- ChatGPT (OpenAI)
- Einsatz zur Unterstützung bei Code-Analyse, Strukturierung und Erklärung
- Inhalte wurden eigenständig überprüft und getestet

Seit dem letzten Stand wurde die „Face in Hole“-Endversion erweitert:

Oval statt Kreis: Das Einfügen erfolgt nicht mehr mit einer Kreis-Maske, sondern als Ellipse/Oval, passend zum Loch im Template.

Automatische Loch-Erkennung: Die Position und Größe des Lochs wird pro Template automatisch über den Alpha-Kanal erkannt (transparenter Bereich) und als Ellipse angenähert (fitEllipse / Bounding-Box als Fallback).

Mirror dauerhaft aktiv: Das Webcam-Bild wird standardmäßig gespiegelt (cv2.flip(frame, 1)), damit es wie eine Selfie-Kamera wirkt.

Live-Zoom / Feinjustierung: Die Größe des sichtbaren Gesichts wird über skalierte ROI-Werte angepasst (mehr Gesicht / weniger Umfeld) ohne hartes Reinzoomen.
Steuerung:

[ / ] → Zoom (FACE_SCALE_X/Y)

; / ' → vertikaler Zoom (FACE_SCALE_Y)

d → Debug ein/aus

p → aktuelle Werte ausgeben (zum Fixieren)

s → Screenshot speichern

ESC / q → beenden

Template-Wechsel per Tastendruck: Mehrere Templates werden in TEMPLATE_PATHS hinterlegt und können während der Laufzeit gewechselt werden:

n / b → nächstes/vorheriges Template

1–4 → direktes Auswählen

Hinweis zu Templates:
Alle Templates müssen als PNG mit Transparenz (Alpha) vorliegen (Loch = transparent).
Mein aktuelles Template heißt template_v2(.png) und muss in TEMPLATE_PATHS entsprechend eingetragen werden.




